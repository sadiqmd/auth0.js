{"version":3,"file":"cordova-auth0-plugin.min.js","sources":["../src/version.js","../src/helper/assert.js","../src/helper/object-assign.js","../src/helper/object.js","../src/helper/window.js","../node_modules/url-join/lib/url-join.js","../node_modules/qs/lib/utils.js","../node_modules/qs/lib/formats.js","../node_modules/qs/lib/stringify.js","../node_modules/qs/lib/parse.js","../plugins/cordova/popup-handler.js","../plugins/cordova/plugin-handler.js","../plugins/cordova/index.js"],"sourcesContent":["module.exports = { raw: '9.8.5' };\n","var toString = Object.prototype.toString;\n\nfunction attribute(o, attr, type, text) {\n  type = type === 'array' ? 'object' : type;\n  if (o && typeof o[attr] !== type) {\n    throw new Error(text);\n  }\n}\n\nfunction variable(o, type, text) {\n  if (typeof o !== type) {\n    throw new Error(text);\n  }\n}\n\nfunction value(o, values, text) {\n  if (values.indexOf(o) === -1) {\n    throw new Error(text);\n  }\n}\n\nfunction check(o, config, attributes) {\n  if (!config.optional || o) {\n    variable(o, config.type, config.message);\n  }\n  if (config.type === 'object' && attributes) {\n    var keys = Object.keys(attributes);\n\n    for (var index = 0; index < keys.length; index++) {\n      var a = keys[index];\n      if (!attributes[a].optional || o[a]) {\n        if (!attributes[a].condition || attributes[a].condition(o)) {\n          attribute(o, a, attributes[a].type, attributes[a].message);\n          if (attributes[a].values) {\n            value(o[a], attributes[a].values, attributes[a].value_message);\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * Wrap `Array.isArray` Polyfill for IE9\n * source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\n *\n * @param {Array} array\n * @private\n */\nfunction isArray(array) {\n  if (this.supportsIsArray()) {\n    return Array.isArray(array);\n  }\n\n  return toString.call(array) === '[object Array]';\n}\n\nfunction supportsIsArray() {\n  return Array.isArray != null;\n}\n\nexport default {\n  check: check,\n  attribute: attribute,\n  variable: variable,\n  value: value,\n  isArray: isArray,\n  supportsIsArray: supportsIsArray\n};\n","/* eslint-disable no-continue */\n\nfunction get() {\n  if (!Object.assign) {\n    return objectAssignPolyfill;\n  }\n\n  return Object.assign;\n}\n\nfunction objectAssignPolyfill(target) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert first argument to object');\n  }\n\n  var to = Object(target);\n  for (var i = 1; i < arguments.length; i++) {\n    var nextSource = arguments[i];\n    if (nextSource === undefined || nextSource === null) {\n      continue;\n    }\n\n    var keysArray = Object.keys(Object(nextSource));\n    for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n      var nextKey = keysArray[nextIndex];\n      var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n      if (desc !== undefined && desc.enumerable) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n  return to;\n}\n\nexport default {\n  get: get,\n  objectAssignPolyfill: objectAssignPolyfill\n};\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\n\nimport assert from './assert';\nimport objectAssign from './object-assign';\n\nfunction pick(object, keys) {\n  return keys.reduce(function(prev, key) {\n    if (object[key]) {\n      prev[key] = object[key];\n    }\n    return prev;\n  }, {});\n}\n\nfunction getKeysNotIn(obj, allowedKeys) {\n  var notAllowed = [];\n  for (var key in obj) {\n    if (allowedKeys.indexOf(key) === -1) {\n      notAllowed.push(key);\n    }\n  }\n  return notAllowed;\n}\n\nfunction objectValues(obj) {\n  var values = [];\n  for (var key in obj) {\n    values.push(obj[key]);\n  }\n  return values;\n}\n\nfunction extend() {\n  var params = objectValues(arguments);\n  params.unshift({});\n  return objectAssign.get().apply(undefined, params);\n}\n\nfunction merge(object, keys) {\n  return {\n    base: keys ? pick(object, keys) : object,\n    with: function(object2, keys2) {\n      object2 = keys2 ? pick(object2, keys2) : object2;\n      return extend(this.base, object2);\n    }\n  };\n}\n\nfunction blacklist(object, blacklistedKeys) {\n  return Object.keys(object).reduce(function(p, key) {\n    if (blacklistedKeys.indexOf(key) === -1) {\n      p[key] = object[key];\n    }\n    return p;\n  }, {});\n}\n\nfunction camelToSnake(str) {\n  var newKey = '';\n  var index = 0;\n  var code;\n  var wasPrevNumber = true;\n  var wasPrevUppercase = true;\n\n  while (index < str.length) {\n    code = str.charCodeAt(index);\n    if (\n      (!wasPrevUppercase && code >= 65 && code <= 90) ||\n      (!wasPrevNumber && code >= 48 && code <= 57)\n    ) {\n      newKey += '_';\n      newKey += str[index].toLowerCase();\n    } else {\n      newKey += str[index].toLowerCase();\n    }\n    wasPrevNumber = code >= 48 && code <= 57;\n    wasPrevUppercase = code >= 65 && code <= 90;\n    index++;\n  }\n\n  return newKey;\n}\n\nfunction snakeToCamel(str) {\n  var parts = str.split('_');\n  return parts.reduce(function(p, c) {\n    return p + c.charAt(0).toUpperCase() + c.slice(1);\n  }, parts.shift());\n}\n\nfunction toSnakeCase(object, exceptions) {\n  if (typeof object !== 'object' || assert.isArray(object) || object === null) {\n    return object;\n  }\n  exceptions = exceptions || [];\n\n  return Object.keys(object).reduce(function(p, key) {\n    var newKey = exceptions.indexOf(key) === -1 ? camelToSnake(key) : key;\n    p[newKey] = toSnakeCase(object[key]);\n    return p;\n  }, {});\n}\n\nfunction toCamelCase(object, exceptions) {\n  if (typeof object !== 'object' || assert.isArray(object) || object === null) {\n    return object;\n  }\n\n  exceptions = exceptions || [];\n\n  return Object.keys(object).reduce(function(p, key) {\n    var newKey = exceptions.indexOf(key) === -1 ? snakeToCamel(key) : key;\n    p[newKey] = toCamelCase(object[key]);\n    return p;\n  }, {});\n}\n\nfunction getLocationFromUrl(href) {\n  var match = href.match(\n    /^(https?:|file:)\\/\\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\\?[^#]*|)(#.*|)$/\n  );\n  return (\n    match && {\n      href: href,\n      protocol: match[1],\n      host: match[2],\n      hostname: match[3],\n      port: match[4],\n      pathname: match[5],\n      search: match[6],\n      hash: match[7]\n    }\n  );\n}\n\nfunction getOriginFromUrl(url) {\n  if (!url) {\n    return undefined;\n  }\n  var parsed = getLocationFromUrl(url);\n  var origin = parsed.protocol + '//' + parsed.hostname;\n  if (parsed.port) {\n    origin += ':' + parsed.port;\n  }\n  return origin;\n}\n\nexport default {\n  toSnakeCase: toSnakeCase,\n  toCamelCase: toCamelCase,\n  blacklist: blacklist,\n  merge: merge,\n  pick: pick,\n  getKeysNotIn: getKeysNotIn,\n  extend: extend,\n  getOriginFromUrl: getOriginFromUrl,\n  getLocationFromUrl: getLocationFromUrl\n};\n","import objectHelper from './object';\n\nfunction redirect(url) {\n  getWindow().location = url;\n}\n\nfunction getDocument() {\n  return getWindow().document;\n}\n\nfunction getWindow() {\n  return window;\n}\n\nfunction getOrigin() {\n  var location = getWindow().location;\n  var origin = location.origin;\n\n  if (!origin) {\n    origin = objectHelper.getOriginFromUrl(location.href);\n  }\n\n  return origin;\n}\n\nexport default {\n  redirect: redirect,\n  getDocument: getDocument,\n  getWindow: getWindow,\n  getOrigin: getOrigin\n};\n","(function (name, context, definition) {\n  if (typeof module !== 'undefined' && module.exports) module.exports = definition();\n  else if (typeof define === 'function' && define.amd) define(definition);\n  else context[name] = definition();\n})('urljoin', this, function () {\n\n  function normalize (strArray) {\n    var resultArray = [];\n\n    // If the first part is a plain protocol, we combine it with the next part.\n    if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n      var first = strArray.shift();\n      strArray[0] = first + strArray[0];\n    }\n\n    // There must be two or three slashes in the file protocol, two slashes in anything else.\n    if (strArray[0].match(/^file:\\/\\/\\//)) {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n    } else {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n    }\n\n    for (var i = 0; i < strArray.length; i++) {\n      var component = strArray[i];\n\n      if (typeof component !== 'string') {\n        throw new TypeError('Url must be a string. Received ' + component);\n      }\n\n      if (component === '') { continue; }\n\n      if (i > 0) {\n        // Removing the starting slashes for each component but the first.\n        component = component.replace(/^[\\/]+/, '');\n      }\n      if (i < strArray.length - 1) {\n        // Removing the ending slashes for each component but the last.\n        component = component.replace(/[\\/]+$/, '');\n      } else {\n        // For the last component we will combine multiple slashes to a single one.\n        component = component.replace(/[\\/]+$/, '/');\n      }\n\n      resultArray.push(component);\n\n    }\n\n    var str = resultArray.join('/');\n    // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n    // remove trailing slash before parameters or hash\n    str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n    // replace ? in parameters with &\n    var parts = str.split('?');\n    str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\n\n    return str;\n  }\n\n  return function () {\n    var input;\n\n    if (typeof arguments[0] === 'object') {\n      input = arguments[0];\n    } else {\n      input = [].slice.call(arguments);\n    }\n\n    return normalize(input);\n  };\n\n});\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    var obj;\n\n    while (queue.length) {\n        var item = queue.pop();\n        obj = item.obj[item.prop];\n\n        if (Array.isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n\n    return obj;\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            if (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (Array.isArray(target) && Array.isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                if (target[i] && typeof target[i] === 'object') {\n                    target[i] = merge(target[i], item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nvar encode = function encode(str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    return compactQueue(queue);\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nmodule.exports = {\n    'default': 'RFC3986',\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return value;\n        }\n    },\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching\n        return prefix + '[]';\n    },\n    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching\n        return prefix;\n    }\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaults = {\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar stringify = function stringify( // eslint-disable-line func-name-matching\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean' || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(stringify(\n                obj[key],\n                generateArrayPrefix(prefix, key),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        } else {\n            values = values.concat(stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.encoder !== null && options.encoder !== undefined && typeof options.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var delimiter = typeof options.delimiter === 'undefined' ? defaults.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : defaults.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : defaults.encode;\n    var encoder = typeof options.encoder === 'function' ? options.encoder : defaults.encoder;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var serializeDate = typeof options.serializeDate === 'function' ? options.serializeDate : defaults.serializeDate;\n    var encodeValuesOnly = typeof options.encodeValuesOnly === 'boolean' ? options.encodeValuesOnly : defaults.encodeValuesOnly;\n    if (typeof options.format === 'undefined') {\n        options.format = formats['default'];\n    } else if (!Object.prototype.hasOwnProperty.call(formats.formatters, options.format)) {\n        throw new TypeError('Unknown format option provided.');\n    }\n    var formatter = formats.formatters[options.format];\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encode ? encoder : null,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly\n        ));\n    }\n\n    var joined = keys.join(delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    parameterLimit: 1000,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder);\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder);\n            val = options.decoder(part.slice(pos + 1), defaults.decoder);\n        }\n        if (has.call(obj, key)) {\n            obj[key] = [].concat(obj[key]).concat(val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options) {\n    var leaf = val;\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]') {\n            obj = [];\n            obj = obj.concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.decoder !== null && options.decoder !== undefined && typeof options.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    options.ignoreQueryPrefix = options.ignoreQueryPrefix === true;\n    options.delimiter = typeof options.delimiter === 'string' || utils.isRegExp(options.delimiter) ? options.delimiter : defaults.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : defaults.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : defaults.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.decoder = typeof options.decoder === 'function' ? options.decoder : defaults.decoder;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : defaults.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : defaults.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : defaults.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : defaults.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options);\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","import windowHandler from '../../src/helper/window';\nimport qs from 'qs';\nimport urljoin from 'url-join';\n\nfunction PopupHandler(webAuth) {\n  this.webAuth = webAuth;\n  this._current_popup = null;\n  this.options = null;\n}\n\nPopupHandler.prototype.preload = function(options) {\n  var _this = this;\n  var _window = windowHandler.getWindow();\n\n  var url = options.url || 'about:blank';\n  var popupOptions = options.popupOptions || {};\n\n  popupOptions.location = 'yes';\n  delete popupOptions.width;\n  delete popupOptions.height;\n\n  var windowFeatures = qs.stringify(popupOptions, {\n    encode: false,\n    delimiter: ','\n  });\n\n  if (this._current_popup && !this._current_popup.closed) {\n    return this._current_popup;\n  }\n\n  this._current_popup = _window.open(url, '_blank', windowFeatures);\n\n  this._current_popup.kill = function(success) {\n    _this._current_popup.success = success;\n    this.close();\n    _this._current_popup = null;\n  };\n\n  return this._current_popup;\n};\n\nPopupHandler.prototype.load = function(url, _, options, cb) {\n  var _this = this;\n  this.url = url;\n  this.options = options;\n  if (!this._current_popup) {\n    options.url = url;\n    this.preload(options);\n  } else {\n    this._current_popup.location.href = url;\n  }\n\n  this.transientErrorHandler = function(event) {\n    _this.errorHandler(event, cb);\n  };\n\n  this.transientStartHandler = function(event) {\n    _this.startHandler(event, cb);\n  };\n\n  this.transientExitHandler = function() {\n    _this.exitHandler(cb);\n  };\n\n  this._current_popup.addEventListener('loaderror', this.transientErrorHandler);\n  this._current_popup.addEventListener('loadstart', this.transientStartHandler);\n  this._current_popup.addEventListener('exit', this.transientExitHandler);\n};\n\nPopupHandler.prototype.errorHandler = function(event, cb) {\n  if (!this._current_popup) {\n    return;\n  }\n\n  this._current_popup.kill(true);\n\n  cb({ error: 'window_error', errorDescription: event.message });\n};\n\nPopupHandler.prototype.unhook = function() {\n  this._current_popup.removeEventListener('loaderror', this.transientErrorHandler);\n  this._current_popup.removeEventListener('loadstart', this.transientStartHandler);\n  this._current_popup.removeEventListener('exit', this.transientExitHandler);\n};\n\nPopupHandler.prototype.exitHandler = function(cb) {\n  if (!this._current_popup) {\n    return;\n  }\n\n  // when the modal is closed, this event is called which ends up removing the\n  // event listeners. If you move this before closing the modal, it will add ~1 sec\n  // delay between the user being redirected to the callback and the popup gets closed.\n  this.unhook();\n\n  if (!this._current_popup.success) {\n    cb({ error: 'window_closed', errorDescription: 'Browser window closed' });\n  }\n};\n\nPopupHandler.prototype.startHandler = function(event, cb) {\n  var _this = this;\n\n  if (!this._current_popup) {\n    return;\n  }\n\n  var callbackUrl = urljoin('https:', this.webAuth.baseOptions.domain, '/mobile');\n\n  if (event.url && !(event.url.indexOf(callbackUrl + '#') === 0)) {\n    return;\n  }\n\n  var parts = event.url.split('#');\n\n  if (parts.length === 1) {\n    return;\n  }\n\n  var opts = { hash: parts.pop() };\n\n  if (this.options.nonce) {\n    opts.nonce = this.options.nonce;\n  }\n\n  this.webAuth.parseHash(opts, function(error, result) {\n    if (error || result) {\n      _this._current_popup.kill(true);\n      cb(error, result);\n    }\n  });\n};\n\nexport default PopupHandler;\n","import urljoin from 'url-join';\nimport PopupHandler from './popup-handler';\n\nfunction PluginHandler(webAuth) {\n  this.webAuth = webAuth;\n}\n\nPluginHandler.prototype.processParams = function (params) {\n  params.redirectUri = urljoin('https://' + params.domain, 'mobile');\n  delete params.owp;\n  return params;\n};\n\nPluginHandler.prototype.getPopupHandler = function () {\n  return new PopupHandler(this.webAuth);\n};\n\nexport default PluginHandler;\n","import version from '../../src/version';\nimport windowHandler from '../../src/helper/window';\nimport PluginHandler from './plugin-handler';\n\nfunction CordovaPlugin() {\n  this.webAuth = null;\n  this.version = version.raw;\n  this.extensibilityPoints = ['popup.authorize', 'popup.getPopupHandler'];\n}\n\nCordovaPlugin.prototype.setWebAuth = function(webAuth) {\n  this.webAuth = webAuth;\n};\n\nCordovaPlugin.prototype.supports = function(extensibilityPoint) {\n  var _window = windowHandler.getWindow();\n  return (\n    (!!_window.cordova || !!_window.electron) &&\n    this.extensibilityPoints.indexOf(extensibilityPoint) > -1\n  );\n};\n\nCordovaPlugin.prototype.init = function() {\n  return new PluginHandler(this.webAuth);\n};\n\nexport default CordovaPlugin;\n"],"names":["raw","toString","Object","prototype","attribute","o","attr","type","text","Error","variable","value","values","indexOf","check","config","attributes","optional","message","keys","index","length","a","condition","value_message","isArray","array","this","supportsIsArray","Array","call","objectAssignPolyfill","target","TypeError","to","i","arguments","nextSource","keysArray","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","undefined","enumerable","get","assign","pick","object","reduce","prev","key","extend","params","obj","push","objectValues","unshift","objectAssign","apply","getLocationFromUrl","href","match","protocol","host","hostname","port","pathname","search","hash","toSnakeCase","exceptions","assert","p","str","code","newKey","wasPrevNumber","wasPrevUppercase","charCodeAt","toLowerCase","camelToSnake","toCamelCase","parts","split","c","charAt","toUpperCase","slice","shift","blacklist","blacklistedKeys","merge","base","with","object2","keys2","getKeysNotIn","allowedKeys","notAllowed","getOriginFromUrl","url","parsed","origin","getWindow","window","redirect","location","getDocument","document","getOrigin","objectHelper","context","definition","strArray","resultArray","first","replace","component","join","normalize","module","exports","has","hasOwnProperty","hexTable","arrayToObject","source","options","plainObjects","create","acc","compact","queue","prop","refs","item","j","val","pop","compacted","compactQueue","decode","decodeURIComponent","e","encode","string","String","out","isBuffer","constructor","isRegExp","allowPrototypes","concat","mergeTarget","forEach","percentTwenties","default","formatters","RFC1738","RFC3986","arrayPrefixGenerators","brackets","prefix","indices","repeat","toISO","Date","toISOString","defaults","delimiter","encoder","utils","encodeValuesOnly","serializeDate","date","skipNulls","strictNullHandling","stringify","generateArrayPrefix","filter","sort","allowDots","formatter","objKeys","opts","format","formats","arrayFormat","joined","addQueryPrefix","PopupHandler","webAuth","_current_popup","PluginHandler","CordovaPlugin","version","extensibilityPoints","preload","_this","_window","windowHandler","popupOptions","width","height","windowFeatures","qs","closed","open","kill","success","close","load","_","cb","transientErrorHandler","event","errorHandler","transientStartHandler","startHandler","transientExitHandler","exitHandler","addEventListener","error","errorDescription","unhook","removeEventListener","callbackUrl","urljoin","baseOptions","domain","nonce","parseHash","result","processParams","redirectUri","owp","getPopupHandler","setWebAuth","supports","extensibilityPoint","cordova","electron","init"],"mappings":"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"}